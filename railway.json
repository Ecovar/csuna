{
  "$schema": "https://railway.app/railway.schema.json",
  "services": [
    {
      "name": "backend",
      "build": {
        "builder": "DOCKERFILE",
        "dockerfilePath": "Dockerfile",
        "dockerContext": "./backend"
      },
      "healthcheckPath": "/health",
      "healthcheckTimeout": 300
    },
    {
      "name": "worker",
      "build": {
        "builder": "DOCKERFILE",
        "dockerfilePath": "Dockerfile",
        "dockerContext": "./backend"
      },
      "startCommand": "uv run dramatiq --skip-logging --processes 4 --threads 4 run_agent_background"
    },
    {
      "name": "frontend",
      "build": {
        "builder": "DOCKERFILE",
        "dockerfilePath": "Dockerfile",
        "dockerContext": "./frontend"
      },
      "healthcheckPath": "/",
      "healthcheckTimeout": 300
    }
  ],
  "plugins": [
    {
      "name": "redis",
      "source": "redis"
    },
    {
      "name": "rabbitmq",
      "source": "rabbitmq"
    }
  ]
}
